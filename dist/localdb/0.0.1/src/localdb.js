define("localdb/0.0.1/src/localdb",[],function(t,e,r){"use strict";var n,i,o,s;o=t("localdb/0.0.1/src/lib/utils"),n=t("localdb/0.0.1/src/lib/collection"),s="ldb_",i=function(){function t(t,e){null==e&&(e={}),this.name=s+t,this.ls=e.engine||localStorage}return t.prototype.options=function(){return{name:this.name.substr(s.length),engine:this.ls}},t.prototype.collections=function(){var t,e,r,n;for(n=[],t=e=0,r=this.ls.length;r>=0?r>e:e>r;t=r>=0?++e:--e)0===this.ls.key(t).indexOf(""+this.name+"_")&&n.push(this.ls.key(t).substr((""+this.name+"_").length));return n},t.prototype.collection=function(t){return new n(t,this)},t.prototype.drop=function(t){var e,r,n,i,o;for(t=null!=t?"_"+t:"",n=function(){var r,n,i;for(i=[],e=r=0,n=this.ls.length;n>=0?n>r:r>n;e=n>=0?++r:--r)0===this.ls.key(e).indexOf(this.name+t)&&i.push(this.ls.key(e));return i}.call(this),i=0,o=n.length;o>i;i++)r=n[i],this.ls.removeItem(r);return!0},t.prototype.timestamp=function(t){return o.timestamp(t)},t}(),i.support=function(){return{localStorage:"undefined"!=typeof localStorage&&null!==localStorage?!0:!1,sessionStorage:"undefined"!=typeof sessionStorage&&null!==sessionStorage?!0:!1,indexedDB:"undefined"!=typeof indexedDB&&null!==indexedDB?!0:!1}},r.exports=i}),define("localdb/0.0.1/src/lib/utils",[],function(require,exports,module){"use strict";var ObjectID,Utils,eq,toString,_isType;ObjectID=require("localdb/0.0.1/src/lib/bson"),Utils={},toString=Object.prototype.toString,_isType=function(t){return function(e){return toString.call(e).toLowerCase()===("[object "+t+"]").toLowerCase()}},Utils.isType=function(t,e){return _isType(e)(t)},Utils.isObject=_isType("object"),Utils.isString=_isType("string"),Utils.isNumber=_isType("number"),Utils.isArray=_isType("array"),Utils.isFunction=_isType("function"),Utils.isRegex=_isType("regexp"),Utils.keys=function(t){var e;return Utils.isObject(t)?Object.keys?Object.keys(t):function(){var r;r=[];for(e in t)Utils.has(t,e)&&r.push(e);return r}():[]},Utils.has=function(t,e){return null!==t&&void 0!==t&&Object.prototype.hasOwnProperty.call(t,e)},eq=function(t,e,r,n){var i,o,s,u,f,a,c,l,h;if(t===e)return 0!==t||1/t===1/e;if(null===t&&void 0===e)return!1;if(void 0===t&&null===e)return!1;if(u=toString.call(t),u!==toString.call(e))return!1;switch(u){case"[object RegExp]":return""+t==""+e;case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":return+t===+e;case"[object Boolean]":return+t===+e}if(o="[object Array]"===u,!o){if("object"!=typeof t||"object"!=typeof e)return!1;if(i=t.constructor,s=e.constructor,i!==s&&!(Utils.isFunction(i)&&i instanceof i&&Utils.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}for(c=r.length;c--;)if(r[c]===t)return n[c]===e;if(r.push(t),n.push(e),o){if(h=t.length,l=h===e.length)for(;h--&&(l=eq(t[h],e[h],r,n)););}else if(a=Utils.keys(t),h=a.length,l=Utils.keys(e).length===h)for(;h--&&(f=a[h],l=Utils.has(e,f)&&eq(t[f],e[f],r,n)););return r.pop(),n.pop(),l},Utils.isEqual=function(t,e){return eq(t,e,[],[])},Utils.createObjectId=function(){return(new ObjectID).inspect()},Utils.stringify=function(t){return null!=t&&Utils.isArray(t)?JSON.stringify(t,function(t,e){return Utils.isRegex(e)||Utils.isFunction(e)?e.toString():e}):"[]"},Utils.parse=function(str){return null!=str&&Utils.isString(str)?JSON.parse(str,function(key,value){var v;try{v=eval(value)}catch(_error){}if(null!=v&&Utils.isRegex(v))return v;try{v=eval("("+value+")")}catch(_error){}return null!=v&&Utils.isFunction(v)?v:value}):[]},Utils.timestamp=function(t){var e;return e=ObjectID(t),e.getTimestamp()},module.exports=Utils}),define("localdb/0.0.1/src/lib/bson",[],function(t,e,r){"use strict";var n,i,o,s,u,f;n=t("localdb/0.0.1/src/lib/binary-parser"),u=function(){var t,e;for(e=[],f=t=0;256>t;f=++t)e.push((15>=f?"0":"")+f.toString(16));return e}(),i=parseInt(16777215*Math.random(),10),s=/^[0-9a-fA-F]{24}$/,o=function(t,e){var r;if(!this instanceof o)return new o(t,e);if(this._bsontype="ObjectID",r=null,null!=t&&"number"!=typeof t&&12!==t.length&&24!==t.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(null==t||"number"==typeof t)this.id=this.generate(t);else{if(null==t||12!==t.length){if(s.test(t))return o.createFromHexString(t);throw new Error("Value passed in is not a valid 24 character hex string")}this.id=t}return o.cacheHexString?this.__id=this.toHexString():void 0},o.prototype.generate=function(t){var e,r,o,s,u;return"number"==typeof t?(s=n.encodeInt(t,32,!0,!0),r=n.encodeInt(i,24,!1),o=n.fromShort("undefined"==typeof process?Math.floor(1e5*Math.random()):process.pid),e=n.encodeInt(this.get_inc(),24,!1,!0)):(u=parseInt(Date.now()/1e3,10),s=n.encodeInt(u,32,!0,!0),r=n.encodeInt(i,24,!1),o=n.fromShort("undefined"==typeof process?Math.floor(1e5*Math.random()):process.pid),e=n.encodeInt(this.get_inc(),24,!1,!0)),s+r+o+e},o.prototype.toHexString=function(){var t,e,r;if(o.cacheHexString&&this.__id)return this.__id;for(t="",f=e=0,r=this.id.length;r>=0?r>e:e>r;f=r>=0?++e:--e)t+=u[this.id.charCodeAt(f)];return o.cacheHexString&&(this.__id=t),t},o.prototype.toString=function(){return this.toHexString()},o.prototype.inspect=o.prototype.toString,o.prototype.getTimestamp=function(){var t;return t=new Date,t.setTime(1e3*Math.floor(n.decodeInt(this.id.substring(0,4),32,!0,!0))),t},o.prototype.get_inc=function(){return o.index=(o.index+1)%16777215},o.index=parseInt(16777215*Math.random(),10),o.createFromHexString=function(t){var e,r;if(null==t||24!==t.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(e="",f=r=0;24>r;f=++r)f%2===0&&(e+=n.fromByte(parseInt(t.substr(f,2),16)));return new o(e,t)},r.exports=o}),define("localdb/0.0.1/src/lib/binary-parser",[],function(t,e,n){function i(t,e){return this instanceof i?(this.bigEndian=t,void(this.allowExceptions=e)):new i(t,e)}function o(t,e){this.bigEndian=t||0,this.buffer=[],this.setBuffer(e)}for(var s=String.fromCharCode,u=[],f=0;64>f;f++)u[f]=Math.pow(2,f);i.warn=function(t){if(this.allowExceptions)throw new Error(t);return 1},i.decodeFloat=function(t,e,r){var n=new this.Buffer(this.bigEndian,t);n.checkBuffer(e+r+1);var i=u[r-1]-1,o=n.readBits(e+r,1),s=n.readBits(e,r),f=0,a=2,c=n.buffer.length+(-e>>3)-1;do for(var l=n.buffer[++c],h=e%8||8,d=1<<h;d>>=1;l&d&&(f+=1/a),a*=2);while(e-=h);return s==(i<<1)+1?f?0/0:o?-1/0:+1/0:(1+-2*o)*(s||f?s?Math.pow(2,s-i)*(1+f):Math.pow(2,-i+1)*f:0)},i.decodeInt=function(t,e,r,n){var i=new this.Buffer(this.bigEndian||n,t),o=i.readBits(0,e),s=u[e];return r&&o>=s/2?o-s:o},i.encodeFloat=function(t,e,n){var i,o,s,f,a,c=u[n-1]-1,l=-c+1,h=c,d=l-e,g=parseFloat(t),p=isNaN(g)||g==-1/0||g==+1/0?g:0,b=0,m=2*c+1+e+3,y=new Array(m),v=(g=0!==p?0:g)<0,S=Math.floor(g=Math.abs(g)),x=g-S;for(f=m;f;y[--f]=0);for(f=c+2;S&&f;y[--f]=S%2,S=Math.floor(S/2));for(f=c+1;x>0&&f;(y[++f]=((x*=2)>=1)-0)&&--x);for(f=-1;++f<m&&!y[f];);if(y[(i=e-1+(f=(b=c+1-f)>=l&&h>=b?f+1:c+1-(b=l-1)))+1]){if(!(o=y[i]))for(a=i+2;!o&&m>a;o=y[a++]);for(a=i+1;o&&--a>=0;(y[a]=!y[a]-0)&&(o=0));}for(f=0>f-2?-1:f-3;++f<m&&!y[f];);for((b=c+1-f)>=l&&h>=b?++f:l>b&&(b!=c+1-m&&d>b&&this.warn("encodeFloat::float underflow"),f=c+1-(b=l-1)),(S||0!==p)&&(this.warn(S?"encodeFloat::float overflow":"encodeFloat::"+p),b=h+1,f=c+2,p==-1/0?v=1:isNaN(p)&&(y[f]=1)),g=Math.abs(b+c),a=n+1,s="";--a;s=g%2+s,g=g>>=1);for(g=0,a=0,f=(s=(v?"1":"0")+s+y.slice(f,f+e).join("")).length,r=[];f;a=(a+1)%8)g+=(1<<a)*s.charAt(--f),7==a&&(r[r.length]=String.fromCharCode(g),g=0);return r[r.length]=g?String.fromCharCode(g):"",(this.bigEndian?r.reverse():r).join("")},i.encodeInt=function(t,e,r,n){var i=u[e];(t>=i||-(i/2)>t)&&(this.warn("encodeInt::overflow"),t=0),0>t&&(t+=i);for(var o=[];t;o[o.length]=String.fromCharCode(t%256),t=Math.floor(t/256));for(e=-(-e>>3)-o.length;e--;o[o.length]="\x00");return(this.bigEndian||n?o.reverse():o).join("")},i.toSmall=function(t){return this.decodeInt(t,8,!0)},i.fromSmall=function(t){return this.encodeInt(t,8,!0)},i.toByte=function(t){return this.decodeInt(t,8,!1)},i.fromByte=function(t){return this.encodeInt(t,8,!1)},i.toShort=function(t){return this.decodeInt(t,16,!0)},i.fromShort=function(t){return this.encodeInt(t,16,!0)},i.toWord=function(t){return this.decodeInt(t,16,!1)},i.fromWord=function(t){return this.encodeInt(t,16,!1)},i.toInt=function(t){return this.decodeInt(t,32,!0)},i.fromInt=function(t){return this.encodeInt(t,32,!0)},i.toLong=function(t){return this.decodeInt(t,64,!0)},i.fromLong=function(t){return this.encodeInt(t,64,!0)},i.toDWord=function(t){return this.decodeInt(t,32,!1)},i.fromDWord=function(t){return this.encodeInt(t,32,!1)},i.toQWord=function(t){return this.decodeInt(t,64,!0)},i.fromQWord=function(t){return this.encodeInt(t,64,!0)},i.toFloat=function(t){return this.decodeFloat(t,23,8)},i.fromFloat=function(t){return this.encodeFloat(t,23,8)},i.toDouble=function(t){return this.decodeFloat(t,52,11)},i.fromDouble=function(t){return this.encodeFloat(t,52,11)},i.encode_int32=function(t,e){var r,n,i,o,u;return u=0>t?t+4294967296:t,r=Math.floor(u/16777215),u&=16777215,n=Math.floor(u/65535),u&=65535,i=Math.floor(u/255),u&=255,o=Math.floor(u),e?[s(r),s(n),s(i),s(o)]:s(r)+s(n)+s(i)+s(o)},i.encode_int64=function(t){var e,r,n,i,o,u,f,a,c;return c=0>t?t+0x10000000000000000:t,e=Math.floor(c/72057594037927940),c&=72057594037927940,r=Math.floor(c/0xffffffffffff),c&=0xffffffffffff,n=Math.floor(c/0xffffffffff),c&=0xffffffffff,i=Math.floor(c/4294967295),c&=4294967295,o=Math.floor(c/16777215),c&=16777215,u=Math.floor(c/65535),c&=65535,f=Math.floor(c/255),c&=255,a=Math.floor(c),s(e)+s(r)+s(n)+s(i)+s(o)+s(u)+s(f)+s(a)},i.decode_utf8=function(t){for(var e,r=t.length,n="",i=0,o=0,s=0;r>i;)o=t.charCodeAt(i),128>o?(n+=String.fromCharCode(o),i++):o>191&&224>o?(s=t.charCodeAt(i+1),n+=String.fromCharCode((31&o)<<6|63&s),i+=2):(s=t.charCodeAt(i+1),e=t.charCodeAt(i+2),n+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&e),i+=3);return n},i.encode_cstring=function(t){return unescape(encodeURIComponent(t))+i.fromByte(0)},i.encode_utf8=function(t){for(var e,r="",n=0,i=t.length;i>n;n++)e=t.charCodeAt(n),128>e?r+=String.fromCharCode(e):e>127&&2048>e?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128));return r},i.hprint=function(t){for(var e,r=0,n=t.length;n>r;r++)t.charCodeAt(r)<32?(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(16):t.charCodeAt(r).toString(16),process.stdout.write(e+" ")):(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(16):t.charCodeAt(r).toString(16),process.stdout.write(e+" "));process.stdout.write("\n\n")},i.ilprint=function(t){for(var e,r=0,n=t.length;n>r;r++)t.charCodeAt(r)<32?(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(10):t.charCodeAt(r).toString(10),requireAMD("util").debug(e+" : ")):(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(10):t.charCodeAt(r).toString(10),requireAMD("util").debug(e+" : "+t.charAt(r)))},i.hlprint=function(t){for(var e,r=0,n=t.length;n>r;r++)t.charCodeAt(r)<32?(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(16):t.charCodeAt(r).toString(16),requireAMD("util").debug(e+" : ")):(e=t.charCodeAt(r)<=15?"0"+t.charCodeAt(r).toString(16):t.charCodeAt(r).toString(16),requireAMD("util").debug(e+" : "+t.charAt(r)))},o.prototype.setBuffer=function(t){var e,r,n;if(t){for(r=e=t.length,n=this.buffer=new Array(e);r;n[e-r]=t.charCodeAt(--r));this.bigEndian&&n.reverse()}},o.prototype.hasNeededBits=function(t){return this.buffer.length>=-(-t>>3)},o.prototype.checkBuffer=function(t){if(!this.hasNeededBits(t))throw new Error("checkBuffer::missing bytes")},o.prototype.readBits=function(t,e){function r(t,e){for(;e--;t=1073741824==(1073741824&(t%=2147483648))?2*t:2*(t-1073741824)+2147483647+1);return t}if(0>t||0>=e)return 0;this.checkBuffer(t+e);for(var n,i=t%8,o=this.buffer.length-(t>>3)-1,s=this.buffer.length+(-(t+e)>>3),u=o-s,f=(this.buffer[o]>>i&(1<<(u?8-i:e))-1)+(u&&(n=(t+e)%8)?(this.buffer[s++]&(1<<n)-1)<<(u--<<3)-i:0);u;f+=r(this.buffer[s++],(u--<<3)-i));return f},i.Buffer=o,n.exports=i}),define("localdb/0.0.1/src/lib/collection",[],function(t,e,r){"use strict";var n,i,o;o=t("localdb/0.0.1/src/lib/utils"),i=t("localdb/0.0.1/src/lib/operation"),n=function(){function t(t,e){this.name=""+e.name+"_"+t,this.ls=e.ls,this.deserialize()}return t.prototype.deserialize=function(){return this.data=o.parse(this.ls.getItem(this.name))},t.prototype.serialize=function(){return this.ls.setItem(this.name,o.stringify(this.data))},t.prototype.drop=function(){return this.ls.removeItem(this.name),!0},t.prototype.insert=function(t,e){return null==e&&(e={}),this.deserialize(),this.data=i.insert(this.data,t,e),this.serialize()},t.prototype.update=function(t,e){return null==e&&(e={}),this.deserialize(),this.data=i.update(this.data,t,e),this.serialize()},t.prototype.remove=function(t){return null==t&&(t={}),this.deserialize(),this.data=i.remove(this.data,t),this.serialize()},t.prototype.find=function(t){return null==t&&(t={}),this.deserialize(),i.find(this.data,t)},t.prototype.findOne=function(t){var e;return null==t&&(t={}),t.limit=1,e=i.find(this.data,t)[0],null!=e?e:{}},t}(),r.exports=n}),define("localdb/0.0.1/src/lib/operation",[],function(t,e,r){"use strict";var n,i,o,s,u;u=t("localdb/0.0.1/src/lib/where"),s=t("localdb/0.0.1/src/lib/utils"),i=t("localdb/0.0.1/src/lib/projection"),n={},n.insert=function(t,e){var r,n,i;if(s.isArray(e))for(n=0,i=e.length;i>n;n++)r=e[n],s.isObject(r)&&(null==r._id&&(r._id=s.createObjectId()),t.push(r));else s.isObject(e)&&(null==e._id&&(e._id=s.createObjectId()),t.push(e));return t},n.update=function(t,e,r){var n,i,s,u,f;f=r.where||{},i=null!=r.multi?r.multi:!0,s=null!=r.upsert?r.upsert:!1;for(n in e)u=e[n],t=o.generate(t,n,u,f,i,s);return t},n.remove=function(t,e){var r,n,i,o,s,f,a;for(s=e.where||{},i=null!=e.multi?e.multi:!0,o=[],n=!1,f=0,a=t.length;a>f;f++)r=t[f],n?o.push(r):u(r,s)?i||(n=!0):o.push(r);return o},n.find=function(t,e){var r,n,o,s,f,a,c;for(f=e.where||{},o=e.projection||{},n=e.limit||-1,s=[],a=0,c=t.length;c>a;a++)if(r=t[a],u(r,f)){if(0===n)break;n-=1,s.push(r)}return i.generate(s,o)},o={isKeyReserved:function(t){return"$inc"===t||"$set"===t||"$mul"===t||"$rename"===t||"$unset"===t||"$max"===t||"$min"===t},generate:function(t,e,r,n,i,s){var f,a,c,l,h,d,g;if(!o.isKeyReserved(e))return t;for(l in r)for(h=r[l],d=0,g=t.length;g>d;d++)if(f=t[d],u(f,n)){for(c=!1;l.indexOf(".")>0;){if(a=l.split(".")[0],f=f[a],null==f&&!s){c=!0;break}s&&(f=f||{}),l=l.substr(l.indexOf(".")+1)}if(!c){switch(e){case"$inc":(null!=f[l]||s)&&(f[l]+=h);break;case"$set":(null!=f[l]||s)&&(f[l]=h);break;case"$mul":(null!=f[l]||s)&&(f[l]*=h);break;case"$rename":f[h]=f[l],delete f[l];break;case"$unset":delete f[l];break;case"$min":(null!=f[l]||s)&&(f[l]=Math.min(f[l],h));break;case"$max":(null!=f[l]||s)&&(f[l]=Math.max(f[l],h))}if(!i)break}}return t}},r.exports=n}),define("localdb/0.0.1/src/lib/where",[],function(t,e,r){"use strict";var n,i,o,s,u,f,a,c,l,h,d,g,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("localdb/0.0.1/src/lib/utils"),h=["$gt","$gte","$lt","$lte","$ne","$in","$nin","$and","$nor","$or","$not","$exists","$type","$mod","$regex","$all","$elemMatch","$size"],u=function(t){return p.call(h,t)>=0},i=function(t,e){var r,n;for(n in e){if(r=e[n],null==t){if("$exists"===n&&r===!1)continue;return!1}if(-1!==n.indexOf(".")){if(s(t,n,r))continue;return!1}if(!g(t,n,r))return!1;if(!f(t,n,r))return!1}return!0},s=function(t,e,r){var n;return n=e.split(".")[0],i(t[/\d/.test(n)?Number(n):n],new function(){this[e.substr(e.indexOf(".")+1)]=r})},g=function(t,e,r){var i;return u(e)?!0:(i=t[e],n.isNumber(r)&&!a(i,r)?!1:n.isString(r)&&!d(i,r)?!1:n.isRegex(r)&&!l(i,r)?!1:n.isArray(r)&&!o(i,r)?!1:n.isObject(r)&&!c(i,r)?!1:!0)},f=function(t,e,r){var o,s,u,a,c,l,h,d,g,b,m;switch(e){case"$gt":if(r>=t)return!1;break;case"$gte":if(r>t)return!1;break;case"$lt":if(t>=r)return!1;break;case"$lte":if(t>r)return!1;break;case"$ne":if(t===r)return!1;break;case"$in":if(n.isArray(t)){for(u=!0,a=0,d=t.length;d>a;a++)s=t[a],u&&function(){var t,e,i;for(e=0,i=r.length;i>e;e++)if(t=r[e],n.isRegex(t)&&t.test(s)||n.isEqual(t,s))return!0;return!1}()&&(u=!1);if(u)return!1}else if(!function(){var e,i,o;for(i=0,o=r.length;o>i;i++)if(e=r[i],n.isRegex(e)&&e.test(t)||n.isEqual(e,t))return!0;return!1}())return!1;break;case"$nin":if(p.call(r,t)>=0)return!1;break;case"$exists":if(r!==(null!=t))return!1;break;case"$type":if(!n.isType(t,r))return!1;break;case"$mod":if(t%r[0]!==r[1])return!1;break;case"$regex":if(!new RegExp(r).test(t))return!1;break;case"$and":for(c=0,g=r.length;g>c;c++)if(o=r[c],!i(t,o))return!1;break;case"$nor":for(l=0,b=r.length;b>l;l++)if(o=r[l],i(t,o))return!1;break;case"$or":if(!function(){var e,n;for(e=0,n=r.length;n>e;e++)if(o=r[e],i(t,o))return!0;return!1}())return!1;break;case"$not":if(i(t,r))return!1;break;case"$all":if(!n.isArray(t))return!1;for(h=0,m=r.length;m>h;h++)if(o=r[h],!function(){var r,i;for(i=0,r=t.length;r>i;i++)if(s=t[i],n.isArray(o)?f(s,e,o):s===o)return!0}())return!1;break;case"$elemMatch":if(!n.isArray(t))return!1;if(!function(){var e,n;for(n=0,e=t.length;e>n;n++)if(s=t[n],i(s,r))return!0}())return!1;break;case"$size":if(!n.isArray(t))return!1;if(t.length!==r)return!1}return!0},a=function(t,e){return n.isNumber(t)&&e===t?!0:n.isArray(t)&&p.call(t,e)>=0?!0:!1},d=function(t,e){return n.isString(t)&&e===t?!0:n.isArray(t)&&p.call(t,e)>=0?!0:!1},l=function(t,e){var r,i,o;if(n.isArray(t)){for(i=0,o=t.length;o>i;i++)if(r=t[i],n.isRegex(r)){if(n.isEqual(r,e))return!0}else if(e.test(r))return!0}else if(n.isRegex(t)){if(n.isEqual(t,e))return!0}else if(e.test(t))return!0;return!1},o=function(t,e){return n.isEqual(t,e)},c=function(t,e){var r,o,s;o=!0;for(s in e)if(r=e[s],u(s)&&(o=!1,!i(t,new function(){this[s]=r})))return!1;return o?n.isEqual(t,e):!0},r.exports=i}),define("localdb/0.0.1/src/lib/projection",[],function(t,e,r){"use strict";var n,i,o;i=t("localdb/0.0.1/src/lib/utils"),n={},n.generate=function(t,e){var r;return"{}"===JSON.stringify(e)?t:function(){var n,i,s;for(s=[],n=0,i=t.length;i>n;n++)r=t[n],s.push(o(r,e));return s}()},o=function(t,e){var r,n,s,u,f,a,c,l,h,d;f={};for(s in e)if(l=e[s],-1!==s.indexOf(".$")){if(s=s.split(".")[0],!i.isArray(t[s])||0===t[s].length)continue;f[s]=[t[s][0]]}else{if(0===s.indexOf("$elemMatch")){if(!i.isArray(t)||0===t.length)continue;for(u=[],h=0,d=t.length;d>h;h++){n=t[h],r=!0;for(a in l)c=l[a],i.isObject(c)?console.log("TODO"):n[a]!==c&&(r=!1);r&&u.push(n)}return u}i.isObject(l)?f[s]=o(t[s],l):1===l&&(f[s]=t[s])}return f},r.exports=n});